<%- include('partials/header') %>

<div class="container">
  <% if (success_msg != '') { %>
    <div class="alert alert-success alert-dismissible fade show" role="alert">
      <%= success_msg %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% } %>
  
  <% if (error_msg != '') { %>
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
      <%= error_msg %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% } %>
  
  <div class="row mb-4">
    <div class="col-lg-4">
      <div class="card border-primary h-100">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0"><i class="bi bi-robot"></i> Bot Status</h5>
        </div>
        <div class="card-body">
          <div class="d-flex align-items-center mb-3">
            <div class="status-indicator <%= botStatus === 'Online' ? 'bg-success' : 'bg-danger' %>" style="width: 12px; height: 12px; border-radius: 50%; margin-right: 8px;"></div>
            <span class="fs-5 fw-bold"><%= botStatus %></span>
          </div>
          
          <div class="mb-2">
            <span class="text-muted">Username:</span> 
            <span class="fw-bold text-info"><%= botUsername %></span>
          </div>
          
          <div class="mb-2">
            <span class="text-muted">Ping:</span> 
            <span class="fw-bold text-warning"><%= botPing %> ms</span>
          </div>
          
          <div class="mb-2">
            <span class="text-muted">Uptime:</span> 
            <span class="fw-bold text-success" id="uptime">Calculating...</span>
          </div>
          
          <div class="d-grid gap-2 mt-4">
            <a href="/dashboard" class="btn btn-primary">
              <i class="bi bi-speedometer2"></i> Dashboard
            </a>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-lg-8">
      <div class="card border-info h-100">
        <div class="card-header bg-info text-white">
          <h5 class="mb-0"><i class="bi bi-sliders"></i> Quick Actions</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-4">
              <div class="d-grid">
                <button class="btn btn-outline-primary" type="button" data-bs-toggle="modal" data-bs-target="#stockModal">
                  <i class="bi bi-box-seam"></i> Manage Stock
                </button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-grid">
                <button class="btn btn-outline-warning" type="button" data-bs-toggle="modal" data-bs-target="#channelsModal">
                  <i class="bi bi-hash"></i> Channels Setup
                </button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-grid">
                <button class="btn btn-outline-danger" type="button" data-bs-toggle="modal" data-bs-target="#rolesModal">
                  <i class="bi bi-person-badge"></i> Roles Setup
                </button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-grid">
                <button class="btn btn-outline-success" type="button" data-bs-toggle="modal" data-bs-target="#prefixesModal">
                  <i class="bi bi-terminal"></i> Command Prefixes
                </button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-grid">
                <button class="btn btn-outline-info" type="button" data-bs-toggle="modal" data-bs-target="#featuresModal">
                  <i class="bi bi-gear-wide-connected"></i> Feature Settings
                </button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-grid">
                <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#backupModal">
                  <i class="bi bi-cloud-arrow-down"></i> Backup/Restore
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Main Settings Section -->
  <div class="row">
    <div class="col-12">
      <div class="card mb-4 border-primary">
        <div class="card-header bg-primary bg-gradient text-white">
          <ul class="nav nav-tabs card-header-tabs" id="settingsTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active text-white" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button" role="tab" aria-controls="general" aria-selected="true">
                <i class="bi bi-gear"></i> General
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link text-white" id="channels-tab" data-bs-toggle="tab" data-bs-target="#channels" type="button" role="tab" aria-controls="channels" aria-selected="false">
                <i class="bi bi-hash"></i> Channels
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link text-white" id="roles-tab" data-bs-toggle="tab" data-bs-target="#roles" type="button" role="tab" aria-controls="roles" aria-selected="false">
                <i class="bi bi-person-badge"></i> Roles
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link text-white" id="commands-tab" data-bs-toggle="tab" data-bs-target="#commands" type="button" role="tab" aria-controls="commands" aria-selected="false">
                <i class="bi bi-terminal"></i> Commands
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link text-white" id="features-tab" data-bs-toggle="tab" data-bs-target="#features" type="button" role="tab" aria-controls="features" aria-selected="false">
                <i class="bi bi-toggles"></i> Features
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link text-white" id="appearance-tab" data-bs-toggle="tab" data-bs-target="#appearance" type="button" role="tab" aria-controls="appearance" aria-selected="false">
                <i class="bi bi-palette"></i> Appearance
              </button>
            </li>
          </ul>
        </div>
        
        <div class="card-body">
          <div class="tab-content" id="settingsTabContent">
            <!-- General Tab -->
            <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
              <form action="/settings/general" method="POST">
                <div class="row g-3">
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="botToken" name="botToken" placeholder="Bot Token" value="<%= config.token ? '••••••••••••••••••••••••••' : '' %>">
                      <label for="botToken">Bot Token</label>
                      <div class="form-text">The Discord bot token. Be careful with this!</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="genCooldown" name="genCooldown" value="<%= config.genCooldown %>" placeholder="Gen Cooldown">
                      <label for="genCooldown">Gen Cooldown (minutes)</label>
                      <div class="form-text">Cooldown period between account generation commands.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="egenCooldownHours" name="egenCooldownHours" value="<%= config.egenCooldownHours %>" placeholder="Extreme Gen Cooldown">
                      <label for="egenCooldownHours">Extreme Gen Cooldown (hours)</label>
                      <div class="form-text">Cooldown period for extreme account generation.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="gif" name="gif" value="<%= config.gif %>" placeholder="Footer GIF URL">
                      <label for="gif">Footer GIF URL</label>
                      <div class="form-text">GIF shown in the footer of embeds.</div>
                    </div>
                  </div>
                </div>
                
                <div class="row mb-3">
                  <div class="col-md-12">
                    <label class="form-label">Admin User IDs</label>
                    <div class="form-control bg-dark" style="height: auto; min-height: 100px;">
                      <% config.adminUserIds.forEach((id, index) => { %>
                        <div class="d-flex align-items-center mb-2">
                          <input type="text" class="form-control form-control-sm me-2" name="adminUserIds[]" value="<%= id %>">
                          <button type="button" class="btn btn-sm btn-danger remove-admin-id"><i class="bi bi-trash"></i></button>
                        </div>
                      <% }); %>
                      <div class="mt-2">
                        <button type="button" class="btn btn-sm btn-success" id="addAdminIdBtn">
                          <i class="bi bi-plus-circle"></i> Add Admin ID
                        </button>
                      </div>
                    </div>
                    <div class="form-text">Discord user IDs who have full admin access to bot commands.</div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-12">
                    <button type="submit" class="btn btn-success">
                      <i class="bi bi-save"></i> Save General Settings
                    </button>
                  </div>
                </div>
              </form>
            </div>
            
            <!-- Channels Tab -->
            <div class="tab-pane fade" id="channels" role="tabpanel" aria-labelledby="channels-tab">
              <form action="/settings/channels" method="POST">
                <div class="row g-3">
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="welcomeChannelId" name="welcomeChannelId" 
                        value="<%= config.welcomeChannelId %>" placeholder="Welcome Channel ID">
                      <label for="welcomeChannelId">Welcome Channel ID</label>
                      <div class="form-text">Channel where welcome messages are sent.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="genChannel" name="genChannel" 
                        value="<%= config.genChannel %>" placeholder="Gen Channel ID">
                      <label for="genChannel">Gen Channel ID</label>
                      <div class="form-text">Channel where .gen commands can be used.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="fgenChannel" name="fgenChannel" 
                        value="<%= config.fgenChannel %>" placeholder="Free Gen Channel ID">
                      <label for="fgenChannel">Free Gen Channel ID</label>
                      <div class="form-text">Channel where .fgen commands can be used.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="bgenChannel" name="bgenChannel" 
                        value="<%= config.bgenChannel %>" placeholder="Basic Gen Channel ID">
                      <label for="bgenChannel">Basic Gen Channel ID</label>
                      <div class="form-text">Channel where .bgen commands can be used.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="egenChannel" name="egenChannel" 
                        value="<%= config.egenChannel %>" placeholder="Extreme Gen Channel ID">
                      <label for="egenChannel">Extreme Gen Channel ID</label>
                      <div class="form-text">Channel where .egen commands can be used.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="cgenChannel" name="cgenChannel" 
                        value="<%= config.cgenChannel %>" placeholder="Cookie Gen Channel ID">
                      <label for="cgenChannel">Cookie Gen Channel ID</label>
                      <div class="form-text">Channel where .cgen commands can be used.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="vouchChannelId" name="vouchChannelId" 
                        value="<%= config.vouchChannelId %>" placeholder="Vouch Channel ID">
                      <label for="vouchChannelId">Vouch Channel ID</label>
                      <div class="form-text">Channel where vouches are displayed.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="logsChannelId" name="logsChannelId" 
                        value="<%= config.logsChannelId %>" placeholder="Logs Channel ID">
                      <label for="logsChannelId">Logs Channel ID</label>
                      <div class="form-text">Channel where bot logs are sent.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="dropChannelId" name="dropChannelId" 
                        value="<%= config.dropChannelId %>" placeholder="Drop Channel ID">
                      <label for="dropChannelId">Drop Channel ID</label>
                      <div class="form-text">Channel where account drops happen.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="stockid" name="stockid" 
                        value="<%= config.stockid %>" placeholder="Stock Channel ID">
                      <label for="stockid">Stock Channel ID</label>
                      <div class="form-text">Channel where stock information is displayed.</div>
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-12">
                    <button type="submit" class="btn btn-warning">
                      <i class="bi bi-save"></i> Save Channel Settings
                    </button>
                  </div>
                </div>
              </form>
            </div>
            
            <!-- Roles Tab -->
            <div class="tab-pane fade" id="roles" role="tabpanel" aria-labelledby="roles-tab">
              <form action="/settings/roles" method="POST">
                <div class="row g-3">
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="providorRole" name="providorRole" 
                        value="<%= config.providorRole %>" placeholder="Provider Role ID">
                      <label for="providorRole">Provider Role ID</label>
                      <div class="form-text">Role for account providers.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="dropRoleId" name="dropRoleId" 
                        value="<%= config.dropRoleId %>" placeholder="Drop Role ID">
                      <label for="dropRoleId">Drop Role ID</label>
                      <div class="form-text">Role pinged for account drops.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="restockroleid" name="restockroleid" 
                        value="<%= config.restockroleid %>" placeholder="Restock Role ID">
                      <label for="restockroleid">Restock Role ID</label>
                      <div class="form-text">Role pinged for restocks.</div>
                    </div>
                  </div>
                </div>
                
                <h6 class="mb-3 mt-4 text-info">Staff Role IDs</h6>
                <div class="row mb-3">
                  <div class="col-md-12">
                    <div class="form-control bg-dark" style="height: auto; min-height: 100px;">
                      <% config.staffRoleIds.forEach((id, index) => { %>
                        <div class="d-flex align-items-center mb-2">
                          <input type="text" class="form-control form-control-sm me-2" name="staffRoleIds[]" value="<%= id %>">
                          <button type="button" class="btn btn-sm btn-danger remove-role-id"><i class="bi bi-trash"></i></button>
                        </div>
                      <% }); %>
                      <div class="mt-2">
                        <button type="button" class="btn btn-sm btn-success" id="addStaffRoleBtn">
                          <i class="bi bi-plus-circle"></i> Add Staff Role
                        </button>
                      </div>
                    </div>
                    <div class="form-text">Discord role IDs for staff members.</div>
                  </div>
                </div>
                
                <h6 class="mb-3 mt-4 text-info">Cookie Send Roles</h6>
                <div class="row mb-3">
                  <div class="col-md-12">
                    <div class="form-control bg-dark" style="height: auto; min-height: 100px;">
                      <% config.cookiesendroles.forEach((id, index) => { %>
                        <div class="d-flex align-items-center mb-2">
                          <input type="text" class="form-control form-control-sm me-2" name="cookiesendroles[]" value="<%= id %>">
                          <button type="button" class="btn btn-sm btn-danger remove-role-id"><i class="bi bi-trash"></i></button>
                        </div>
                      <% }); %>
                      <div class="mt-2">
                        <button type="button" class="btn btn-sm btn-success" id="addCookieRoleBtn">
                          <i class="bi bi-plus-circle"></i> Add Cookie Role
                        </button>
                      </div>
                    </div>
                    <div class="form-text">Roles allowed to send cookies.</div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-12">
                    <button type="submit" class="btn btn-danger">
                      <i class="bi bi-save"></i> Save Role Settings
                    </button>
                  </div>
                </div>
              </form>
            </div>
            
            <!-- Commands Tab -->
            <div class="tab-pane fade" id="commands" role="tabpanel" aria-labelledby="commands-tab">
              <form action="/settings/commands" method="POST">
                <div class="row g-3">
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="mainPrefix" name="mainPrefix" 
                        value="<%= config.mainPrefix %>" placeholder="Main Prefix">
                      <label for="mainPrefix">Main Prefix</label>
                      <div class="form-text">The main prefix for bot commands (e.g., .help).</div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="helpPrefix" name="helpPrefix" 
                        value="<%= config.helpPrefix %>" placeholder="Help Prefix">
                      <label for="helpPrefix">Help Prefix</label>
                      <div class="form-text">The prefix used for help commands (e.g., =help).</div>
                    </div>
                  </div>
                  
                  <div class="col-md-4">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="vouchPrefix" name="vouchPrefix" 
                        value="<%= config.vouchPrefix %>" placeholder="Vouch Prefix">
                      <label for="vouchPrefix">Vouch Prefix</label>
                      <div class="form-text">The prefix for vouch commands.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-4">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="negVouchPrefix" name="negVouchPrefix" 
                        value="<%= config.negVouchPrefix %>" placeholder="Negative Vouch Prefix">
                      <label for="negVouchPrefix">Negative Vouch Prefix</label>
                      <div class="form-text">The prefix for negative vouch commands.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-4">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="extremePrefix" name="extremePrefix" 
                        value="<%= config.extremePrefix %>" placeholder="Extreme Prefix">
                      <label for="extremePrefix">Extreme Prefix</label>
                      <div class="form-text">The prefix for extreme commands.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-4">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="basicPrefix" name="basicPrefix" 
                        value="<%= config.basicPrefix %>" placeholder="Basic Prefix">
                      <label for="basicPrefix">Basic Prefix</label>
                      <div class="form-text">The prefix for basic commands.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-4">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="freePrefix" name="freePrefix" 
                        value="<%= config.freePrefix %>" placeholder="Free Prefix">
                      <label for="freePrefix">Free Prefix</label>
                      <div class="form-text">The prefix for free tier commands.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-4">
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="cookiePrefix" name="cookiePrefix" 
                        value="<%= config.cookiePrefix %>" placeholder="Cookie Prefix">
                      <label for="cookiePrefix">Cookie Prefix</label>
                      <div class="form-text">The prefix for cookie commands.</div>
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-12">
                    <button type="submit" class="btn btn-primary">
                      <i class="bi bi-save"></i> Save Command Settings
                    </button>
                  </div>
                </div>
              </form>
            </div>
            
            <!-- Features Tab -->
            <div class="tab-pane fade" id="features" role="tabpanel" aria-labelledby="features-tab">
              <form action="/settings/features" method="POST">
                <div class="row g-3">
                  <div class="col-md-6">
                    <div class="card bg-dark mb-3">
                      <div class="card-body">
                        <h5 class="card-title text-primary">Command Error Messages</h5>
                        <div class="form-check form-switch mb-3">
                          <input class="form-check-input" type="checkbox" id="error_message" name="error_message" <%= config.command.error_message ? 'checked' : '' %>>
                          <label class="form-check-label" for="error_message">Show Error Messages</label>
                          <div class="form-text">Show error messages when commands fail.</div>
                        </div>
                        
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="notfound_message" name="notfound_message" <%= config.command.notfound_message ? 'checked' : '' %>>
                          <label class="form-check-label" for="notfound_message">Show Command Not Found Messages</label>
                          <div class="form-text">Show messages when unknown commands are used.</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <div class="card bg-dark mb-3">
                      <div class="card-body">
                        <h5 class="card-title text-primary">Drop System</h5>
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="dropSessionActive" name="dropSessionActive" <%= config.dropSessionActive ? 'checked' : '' %>>
                          <label class="form-check-label" for="dropSessionActive">Activate Drops</label>
                          <div class="form-text">Enable the account drop system.</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="row mt-3">
                  <div class="col-12">
                    <h5 class="text-info mb-3">Ticket Categories</h5>
                    <div class="card bg-dark">
                      <div class="card-body">
                        <div class="form-control bg-dark" style="height: auto; min-height: 100px;">
                          <% config.ticketcategories.forEach((id, index) => { %>
                            <div class="d-flex align-items-center mb-2">
                              <input type="text" class="form-control form-control-sm me-2" name="ticketcategories[]" value="<%= id %>">
                              <button type="button" class="btn btn-sm btn-danger remove-ticket-category"><i class="bi bi-trash"></i></button>
                            </div>
                          <% }); %>
                          <div class="mt-2">
                            <button type="button" class="btn btn-sm btn-success" id="addTicketCategoryBtn">
                              <i class="bi bi-plus-circle"></i> Add Ticket Category
                            </button>
                          </div>
                        </div>
                        <div class="form-text">Discord category IDs for tickets.</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="row mt-4">
                  <div class="col-12">
                    <button type="submit" class="btn btn-success">
                      <i class="bi bi-save"></i> Save Feature Settings
                    </button>
                  </div>
                </div>
              </form>
            </div>
            
            <!-- Appearance Tab -->
            <div class="tab-pane fade" id="appearance" role="tabpanel" aria-labelledby="appearance-tab">
              <form action="/settings/appearance" method="POST">
                <div class="row">
                  <div class="col-md-6">
                    <h5 class="text-primary mb-3">Embed Colors</h5>
                    <div class="mb-3">
                      <label for="colorDefault" class="form-label">Default Color</label>
                      <div class="input-group">
                        <span class="input-group-text" style="background-color: <%= config.color.default %>; width: 40px;"></span>
                        <input type="text" class="form-control" id="colorDefault" name="colorDefault" value="<%= config.color.default %>">
                      </div>
                    </div>
                    
                    <div class="mb-3">
                      <label for="colorGreen" class="form-label">Success Color</label>
                      <div class="input-group">
                        <span class="input-group-text" style="background-color: <%= config.color.green %>; width: 40px;"></span>
                        <input type="text" class="form-control" id="colorGreen" name="colorGreen" value="<%= config.color.green %>">
                      </div>
                    </div>
                    
                    <div class="mb-3">
                      <label for="colorRed" class="form-label">Error Color</label>
                      <div class="input-group">
                        <span class="input-group-text" style="background-color: <%= config.color.red %>; width: 40px;"></span>
                        <input type="text" class="form-control" id="colorRed" name="colorRed" value="<%= config.color.red %>">
                      </div>
                    </div>
                    
                    <div class="mb-3">
                      <label for="colorYellow" class="form-label">Warning Color</label>
                      <div class="input-group">
                        <span class="input-group-text" style="background-color: <%= config.color.yellow %>; width: 40px;"></span>
                        <input type="text" class="form-control" id="colorYellow" name="colorYellow" value="<%= config.color.yellow %>">
                      </div>
                    </div>
                    
                    <div class="mb-3">
                      <label for="colorBlue" class="form-label">Info Color</label>
                      <div class="input-group">
                        <span class="input-group-text" style="background-color: <%= config.color.blue %>; width: 40px;"></span>
                        <input type="text" class="form-control" id="colorBlue" name="colorBlue" value="<%= config.color.blue %>">
                      </div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                    <h5 class="text-primary mb-3">Bot Appearance</h5>
                    <div class="mb-3">
                      <label for="footerGif" class="form-label">Footer GIF</label>
                      <input type="text" class="form-control" id="footerGif" name="footerGif" value="<%= config.gif %>">
                      <div class="form-text">URL of the GIF displayed in embed footers.</div>
                    </div>
                    
                    <div class="card bg-dark">
                      <div class="card-body text-center">
                        <h6 class="mb-3">Footer GIF Preview</h6>
                        <div class="embed-responsive">
                          <img src="<%= config.gif %>" class="img-fluid rounded" alt="Footer GIF" style="max-height: 150px;">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="row mt-4">
                  <div class="col-12">
                    <button type="submit" class="btn btn-primary">
                      <i class="bi bi-save"></i> Save Appearance Settings
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Components -->
<!-- Stock Modal -->
<div class="modal fade" id="stockModal" tabindex="-1" aria-labelledby="stockModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="stockModalLabel"><i class="bi bi-box-seam"></i> Quick Stock Management</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-4 mb-3">
            <div class="card bg-dark h-100">
              <div class="card-body text-center">
                <i class="bi bi-stars text-warning" style="font-size: 2rem;"></i>
                <h5 class="mt-2">Premium Stock</h5>
                <a href="/stock" class="btn btn-sm btn-outline-warning mt-2">Manage</a>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-3">
            <div class="card bg-dark h-100">
              <div class="card-body text-center">
                <i class="bi bi-box text-info" style="font-size: 2rem;"></i>
                <h5 class="mt-2">Basic Stock</h5>
                <a href="/stock/basic" class="btn btn-sm btn-outline-info mt-2">Manage</a>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-3">
            <div class="card bg-dark h-100">
              <div class="card-body text-center">
                <i class="bi bi-gift text-success" style="font-size: 2rem;"></i>
                <h5 class="mt-2">Free Stock</h5>
                <a href="/stock/free" class="btn btn-sm btn-outline-success mt-2">Manage</a>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-12">
            <div class="card bg-dark">
              <div class="card-body">
                <h5 class="text-primary">Quick Actions</h5>
                <div class="row g-2">
                  <div class="col-md-6">
                    <a href="/restock" class="btn btn-outline-success btn-sm w-100">
                      <i class="bi bi-arrow-repeat"></i> Restock Accounts
                    </a>
                  </div>
                  <div class="col-md-6">
                    <a href="/stock/clear" class="btn btn-outline-danger btn-sm w-100">
                      <i class="bi bi-trash"></i> Clear Empty Files
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript for dynamic elements -->
<script>
  // Add event listeners after DOM is loaded
  document.addEventListener('DOMContentLoaded', function() {
    // Uptime counter
    const startTime = Date.now();
    setInterval(function() {
      const uptime = Math.floor((Date.now() - startTime) / 1000);
      const hours = Math.floor(uptime / 3600);
      const minutes = Math.floor((uptime % 3600) / 60);
      const seconds = uptime % 60;
      document.getElementById('uptime').textContent = `${hours}h ${minutes}m ${seconds}s`;
    }, 1000);
    
    // Dynamic array elements
    document.getElementById('addAdminIdBtn').addEventListener('click', function() {
      const container = this.closest('.form-control').querySelector('div:last-of-type');
      const newElement = document.createElement('div');
      newElement.className = 'd-flex align-items-center mb-2';
      newElement.innerHTML = `
        <input type="text" class="form-control form-control-sm me-2" name="adminUserIds[]" value="">
        <button type="button" class="btn btn-sm btn-danger remove-admin-id"><i class="bi bi-trash"></i></button>
      `;
      container.parentNode.insertBefore(newElement, container);
    });
    
    document.getElementById('addStaffRoleBtn').addEventListener('click', function() {
      const container = this.closest('.form-control').querySelector('div:last-of-type');
      const newElement = document.createElement('div');
      newElement.className = 'd-flex align-items-center mb-2';
      newElement.innerHTML = `
        <input type="text" class="form-control form-control-sm me-2" name="staffRoleIds[]" value="">
        <button type="button" class="btn btn-sm btn-danger remove-role-id"><i class="bi bi-trash"></i></button>
      `;
      container.parentNode.insertBefore(newElement, container);
    });
    
    document.getElementById('addCookieRoleBtn').addEventListener('click', function() {
      const container = this.closest('.form-control').querySelector('div:last-of-type');
      const newElement = document.createElement('div');
      newElement.className = 'd-flex align-items-center mb-2';
      newElement.innerHTML = `
        <input type="text" class="form-control form-control-sm me-2" name="cookiesendroles[]" value="">
        <button type="button" class="btn btn-sm btn-danger remove-role-id"><i class="bi bi-trash"></i></button>
      `;
      container.parentNode.insertBefore(newElement, container);
    });
    
    document.getElementById('addTicketCategoryBtn').addEventListener('click', function() {
      const container = this.closest('.form-control').querySelector('div:last-of-type');
      const newElement = document.createElement('div');
      newElement.className = 'd-flex align-items-center mb-2';
      newElement.innerHTML = `
        <input type="text" class="form-control form-control-sm me-2" name="ticketcategories[]" value="">
        <button type="button" class="btn btn-sm btn-danger remove-ticket-category"><i class="bi bi-trash"></i></button>
      `;
      container.parentNode.insertBefore(newElement, container);
    });
    
    // Event delegation for dynamic remove buttons
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('remove-admin-id') || 
          e.target.parentElement.classList.contains('remove-admin-id')) {
        const row = e.target.closest('.d-flex');
        row.remove();
      }
      
      if (e.target.classList.contains('remove-role-id') || 
          e.target.parentElement.classList.contains('remove-role-id')) {
        const row = e.target.closest('.d-flex');
        row.remove();
      }
      
      if (e.target.classList.contains('remove-ticket-category') || 
          e.target.parentElement.classList.contains('remove-ticket-category')) {
        const row = e.target.closest('.d-flex');
        row.remove();
      }
    });
  });
</script>

<%- include('partials/footer') %>